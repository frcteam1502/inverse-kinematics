import pygame
import math

SCREEN_HEIGHT = 700
SCREEN_WIDTH = 700
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
GREEN = (0, 255, 0)
STARTING_LOCATION = (350, 350)
LEG1_LENGTH = 200
LEG2_LENGTH = 100
pygame.init()

screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
pygame.display.set_caption("My Game")

clock = pygame.time.Clock()

#pygame.mouse.set_visible(False)
class Leg():
    global screen
    length = None
    end_point = None
    start_point = None
    angle = None
    def __init__(self, length):
        self.length = length
    def draw(self, start_point, angle):
        self.angle = angle
        y = self.length * math.sin(self.deg_to_rad(angle))
        x = math.sqrt(self.length ** 2 - y ** 2)
        self.start_point = start_point
        self.end_point = (start_point[0] + x, start_point[1] - y)
        pygame.draw.lines(screen, BLACK, False, [self.end_point, self.start_point], 5)

    def deg_to_rad(self, deg):
        return deg * math.pi / 180
    def rad_to_deg(self, rad):
        return rad * 180 / math.pi


class End():
    global screen
    global STARTING_LOCATION
    pos = None
    bound = None

    def __init__(self, bound):
        self.bound = bound

    def draw(self, pos):
        mouse_x, mouse_y = pos
        right_x = mouse_x if max(mouse_x, STARTING_LOCATION[0]) == mouse_x else STARTING_LOCATION[0]
        wrong_x = mouse_x if right_x != mouse_x else STARTING_LOCATION[0]
        right_y = mouse_y if max(mouse_y, STARTING_LOCATION[1]) == mouse_y else STARTING_LOCATION[1]
        wrong_y = mouse_y if right_y != mouse_y else STARTING_LOCATION[1]
        if not((right_x - wrong_x) ** 2 + (right_y - wrong_y) ** 2 > self.bound ** 2):
            pygame.draw.circle(screen, BLACK, (int(mouse_x), int(mouse_y)), 5)

    def bound_circle(self):
        pygame.draw.circle(screen, GREEN, STARTING_LOCATION, self.bound, 5)

done = False
first_leg = Leg(LEG1_LENGTH)
second_leg = Leg(LEG2_LENGTH)
end = End(LEG1_LENGTH + LEG2_LENGTH)

while not done:
    mouse_pos = pygame.mouse.get_pos()
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done = True
    
    screen.fill(WHITE)
    
    end.bound_circle()
    end.draw(mouse_pos)
    first_leg.draw(STARTING_LOCATION, 0)
    second_leg.draw(first_leg.end_point, first_leg.angle)
    pygame.display.flip()
    clock.tick(200)

pygame.quit()
